{% extends "Login/main.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block title %}LCIC{% endblock %}
{% block content %}
</br>
</br>
</br>
</br>
<h2 class="text-center m-4">ແກ້ໄຂຂໍ້ມູນຜູ້ໃຊ້ລະບົບ</h2>

 <div class = "container mt-3" style="width: 95%; font-size: 16px">
    <form action="" method="POST" class="card p-3 mt-5" autocomplete="off" novalidate>
        {% csrf_token %}
        <div class="row">
            <div class="col-6">
                {{ form.nameL|as_crispy_field }}
            </div>
            <div class="col-6">
                {{ form.surnameL|as_crispy_field }}
            </div>
            <div class="col-6">
                {{ form.nameE|as_crispy_field }}
            </div>
            <div class="col-6">
                {{ form.surnameE|as_crispy_field }}
            </div>
            <div class="col-4">
                {{ form.username|as_crispy_field }}
            </div>
            <div class="col-4">
                {{ form.password|as_crispy_field }}
            </div>
            <div class="col-4">
                {{ form.check_password|as_crispy_field }}
            </div>
            <div class="col-4">
                {{ form.GID|as_crispy_field }}
            </div>
            <div class="col-4">
                {{ form.MID|as_crispy_field }}
            </div>
            <div class="col-4">
                {{ form.is_active|as_crispy_field }}
            </div>
        </div>
            <div class="col-4">
                <button type="submit" class="btn btn-primary mt-3" style="width:90px">ບັນທຶກ</button>
                <a href="{% url 'lcicHome:manageUser' %}" class="btn btn-secondary mt-3" style="width:90px">ຍົກເລີກ</a>
            </div>
            {% comment %} <div class="col-6">
                <a href="{% url 'lcicHome:manage_user' %}" class="btn btn-secondary" style="width:90px">ຍົກເລີກ</a>
            </div> {% endcomment %}

        
        
    </form>
    <!-- Message from backend-->
    {% for message in messages %}
        {% if message.tags == 'success'  %}
         <!--Use SweetAlert-->
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
        <script>
            var m = "{{ message }}";
            swal("ອັບເດດຂໍ້ມູນສຳເລັດ !", m,"success") 
        </script> 
            <div class="alert alert-primary alert-dismissible fade show" role="alert">{{message}}
                <a href="{% url 'lcicHome:manageUser' %}" type="button" class="btn btn-close" data-bs-dismiss="alert" aria-label="close"></a>
            </div> 

        {% elif message.tags == 'error' %}
            <div class="alert alert-danger alert-dismissible fade show" role="alert">{{message}}
                <a href="{% url 'lcicHome:manageUser' %}" type="button" class="btn btn-close" data-bs-dismiss="alert" aria-label="close"></a>
            </div>
        {% endif %}
    {% endfor %}
</div> 
{% comment %} <h2 class="text-center m-4">ແກ້ໄຂຂໍ້ມູນຜູ້ໃຊ້ລະບົບ</h2> {% endcomment %}
        {% comment %} {% if success  %}
            <div class="alert alert-success" role="alert">
                ສຳເລັດການເພີ່ມຂໍ້ມູນ
                <a href="{% url 'lcicHome:manage_user' %}" class="alert-link">ກັບຄືນ.</a>
            </div>
        {% else %} {% endcomment %}
            {% comment %} <div class="row justify-content-center">
                <div class="col-6">
                    <div class="card bg-light mb-3">
                        <div class="card-header">
                            <i class="fa-solid fa-pen-to-square fa-lg"> ຂໍ້ມູນຜູ້ໃຊ້ລະບົບ</i>
                        </div>
                        <div class="card-body">
                            <form action="" method="POST">
                                {% csrf_token %}
                                {{ form.as_p }}
                                <button type="submit" class="btn btn-primary">ແກ້ໄຂ</button>
                                <a href="{% url 'lcicHome:manage_user' %}" class="btn btn-secondary">ຍົກເລີກ</a>
                                {% if success %}
                                <div class="alert alert-success mt-4" role="alert" style="display:block">
                                    ສຳເລັດການແກ້ໄຂຂໍ້ມູນ
                                    <a href="{% url 'lcicHome:manage_user' %}" class="alert-link">ກັບຄືນ.</a>
                                </div>
                                {% endif %}
                            </form>
                        </div>
                      </div>
                </div>
            </div> {% endcomment %}
        {% comment %} {% endif %} {% endcomment %}
{% endblock %}