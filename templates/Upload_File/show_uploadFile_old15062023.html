{% extends "Login/main.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block title %}LCIC{% endblock %}
{% block content %}
</br>
</br>
</br>
</br>
<!--Show Upload File-->
<h3 class= " text-center m-4"  > <i class="fa-solid fa-share-from-square fa-lg" ></i> ນຳສົ່ງຂໍ້ມູນ</h3>
<div class = "container mt-3 mb-5" style="width: 55%; font-size: 16px">
    <form action="{% url 'lcicHome:show_uploadFile' %}" method="POST" class="card p-3 mt-5" autocomplete="off" novalidate>
        {% csrf_token %}
        <div class="row">
            {% comment %} <div class="col-6">
                {{ form.nameL|as_crispy_field }}
            </div>
            <div class="col-6">
                {{ form.surnameL|as_crispy_field }}
            </div>
            <div class="col-6">
                {{ form.nameE|as_crispy_field }}
            </div>
            <div class="col-6">
                {{ form.surnameE|as_crispy_field }}
            </div>
            <div class="col-4">
                {{ form.username|as_crispy_field }}
            </div>
            <div class="col-4">
                {{ form.password|as_crispy_field }}
            </div>
            <div class="col-4">
                {{ form.check_password|as_crispy_field }}
            </div>
            <div class="col-6">
                {{ form.GID|as_crispy_field }}
            </div>
             {% endcomment %}
             <div class="col-6">
                {{ form.MID|as_crispy_field }}
            </div>
            <div class="col-6">
                {{ form.status|as_crispy_field }}
            </div>
            <div class="col-4">
                {{ form.period|as_crispy_field }}
            </div>
        </div>
            <div class="col-6">
                <button type="submit" class="btn btn-primary mt-3" style="width:90px">ສະແດງ</button>
                {% comment %} <a href="{% url 'lcicHome:manage_user' %}" class="btn btn-secondary mt-3" style="width:90px">ຍົກເລີກ</a> {% endcomment %}
            </div>
    </form>
</div>
<div class="d-inline-block">
    <span class="">
        <a id="adduser" href="{% url 'lcicHome:show_uploadFile' %}" class="me-4 mb-4"><i class="fa-solid fa-arrows-rotate"></i> ປັບຂໍ້ມູນຫຼ້າສຸດ</a>
        <a id="adduser" href="{% url 'lcicHome:upload_file' %}" class="me-4 ms-4 mb-4"><i class="fa-solid fa-file-circle-plus"></i> ການນຳສົ່ງຂໍ້ມູນໃໝ່</a>
    </span>
</div>

<div class="container-fluid">
    <div class="row">
        
        <div class="col-12">
            {% if showFiles %}
            <div class="card bg-light ms-4 me-4 mb-4">
                <div class="card-header">
                    <i class="fa-solid fa-list fa-lg"></i> ການນຳສົ່ງຂໍ້ມູນທັງໝົດ
                </div>
                <div class="card-body">
                  <p class="card-text">
                      <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                              <tr>
                                <th scope="col">ລະຫັດ</th>
                                <th scope="col">ສະມາຊິກ</th>
                                <th scope="col">ວັນທີ ແລະ ເວລານຳສົ່ງຂໍ້ມູນ</th>
                                <th scope="col">ຂໍ້ມູນປະຈຳເດືອນ</th>
                                <th scope="col">ຊື່ຟາຍເອກກະສານ</th>
                                <th scope="col">ຂະໜາດຂອງຂໍ້ມູນ</th>
                                <th scope="col">ສະຖານະພາບ & ຂໍ້ຜິດພາດ</th>
                                <th scope="col">ສະຖານະອັບໂຫຼດ</th>
                              </tr>
                            </thead>
                            <tbody>
                              {% for showFile in showFiles %}
                              <tr>
                                <td>{{showFile.FID}}</td>
                                <td>{{showFile.MID.code}}</td>
                                <td>{{showFile.insertDate}}</td>
                                <td>{{showFile.period}}</td>
                                <td><a href="media/fileUploads/{{showFile.fileUpload}}" id="filename">{{showFile.fileUpload}}</a></td>
                                <td>{{showFile.fileSize}}</td>
                                <td>{{showFile.status}}</td>
                                <td>{{showFile.status_upload}}</td>
                              </tr>
                              {% endfor %}
                            </tbody>
                          </table>
                      </div>
                  </p>
                </div>
            </div>
            {% else %}
            <h5 class="alert alert-primary ms-4 me-4">ບໍ່ມີຂໍ້ມູນການນຳສົ່ງ</h5>
            {% endif %}
        </div>
    </div>
</div>

{% endblock %}